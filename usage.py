""" 
Before using, run the following pip commands

$  pip install alt-profanity-check
$  pip install text2emotion
$  pip install git+https://github.com/boudinfl/pke.git
$  pip install flashtext

$  python -m spacy download en_core_web_sm
"""

from covid_diaries_nlp import CovidDiariesNLP
doc = "V. Bhaskar travelled to Chennai to tend to an ailing cousin . Despite taking all possible precautions, he tested positive at the same hospital and continues to quarantine away from home.He recounts his COVID experience, penning the psychological and financial trauma COVID infested on him and his family...Going to Chennai and that too to stay in a hospital when Coronavirus has still not subsided there? It's like entering the lion's den. That came from a concerned friend. Most of you who read this statement will side with my friend.Travelling to Chennai and staying in a hospital when COVID-19 hasn't subsided there? It's like entering the lion's den! That came from a concerned friend. I am sure most people will side with him. However, life at times puts in you in such challenging situations where you can't say no and just have to go, even during a pandemic...R is a cousin of mine who lives in Chennai. Tragedy struck this family one after the other. A fortnight back, R had an heart attack and was admitted to a hospital.The family needed a support, and so I volunteered.I stayed in the hospital as his attendee. Even though COVID norms don't allow, I was cleared by the hospital's infectious disease department to stay. I was asked to undergo a COVID swab test for the same. There were restrictions and I was not allowed to exit the hospital or meet anyone. I was so happy to hear the safety measures being taken. Even my cousin underwent the test and came out negative. It all seemed okay.Days on end, I stayed by my cousin's side and helped take care of him. I couldn't sleep well though in the room. Nurses, dieticians, administrative staff, physiotherapists, ward boys all visited from time to time.I was still confident that I was going to escape unscathed. I am majorly health conscious, do regular yoga, meditation and even did hata yoga kriya. Neither did I have any ailments. Meanwhile, I, too planned to leave for home as my cousin was getting discharged. And then, another tragedy struck.On the sixth day of recovery, my cousin R started gasping for breath and worsened as the day passed. Oxygen had to be administered. Suddenly, so many tests were ordered but his condition didn't improve much. Pulmonogists and lung specialists were called in. X-Ray was done. When everything came out clear, a COVID-19 test was advised.We were oblivious of the danger to fall upon us. As precaution measures were enlisted outside our room, I was sleeping barely two feet away from my ailing cousin who had been suspected sick of the virus!Suddenly, the hospital staff took even more measures- from PPE suits to disposable cutlery. We were still waiting for the results as it was a RT-PCR test. I continued caregiving for my cousin despite all of this.My cousin had tested positive. The results came out at 1 next day. However, I suspect the hospital staff knew beforehand and let me stay near an infected person for long hours. R's daughter was called and he was shifted to a separate ward, where he was to be treated.I had to go into quarantine as per the protocols. R's family asked me to stay with them, despite my hesitation and fears of putting them in danger. On the second day itself, my relatives arranged a COVID test for me. I was also getting quite homesick. Somehow I had this feeling I would come out negative and started packing my stuff. But then, the unexpected happened. I tested POSITIVE!! I was shocked, angry and in disbelief. I can't tell you how it felt at that particular moment-all those emotions. The only silver lining, I believe is that the viral load in my body was not alarming, which means I could have barely transmitted it. Now I had to stay in this room for the next 14 days. It took a while for that to sink in and the thought of having to trouble my relatives for even the tiniest of tasks bothered me. Soon, the depressing home quarantine poster was put on the house door. When I write this, it is 8th day of my quarantine. I am taking medicines prescribed by the doctors. Drinking that bitter potion happily as I lost some sense of taste and smell in these two days. I accepted the fact, and ordered a few things to make life in quarantine easier.After a week or so, I will walk out free, but two major questions haunt me even now :1. Are the hospitals safe today? Both of us were COVID negative when we entered and we did not get in touch with any outsiders, nor did we go out of the hospital. We didn't meet any other patient as our movement was restricted to the room only, living in a bubble. Occasionally I visited restaurant that too, when it was not crowded. So it's clear, we must have got Covid from inside the room.2. Why was I made to continue my stay for half a day with a proven Covid patient, without even conveying to me the risks involved in staying together? It left a bitter feeling when I started questioning myself. Is it not a very basic human right to be warned, if one's life is in jeopardy? Even after the hospital knowing that a patient is Covid-19 positive, was it correct in allowing an unsuspecting attendant with him for 16 hours post their cognizance of the discovery of virus? Is there not huge probability that i could have got the virus in those 16 hours of exposure?Anyway, what I would like to tell people is to be safe. COVID is still very much active and lurking around, attacking unsuspective victims. Apart from mental trauma due to social stigma, there is a considerable financial burden on each of the covid patients.My COVID experience has sadly, also made me skeptical of stepping in a hospital. What if I had caught it from one of the ward boys or pantry servers? I will always look at them with a suspicious. It has made me scared of having visitors now. It's not just me. COVID, I feel has rooted away the trust we had with the world around us. I feel, it may take a few decades for the scar of coronavirus to erase from psyche of the people who lived in early 21st century.Did you fight COVID-19? We want to hear all about it. ETimes Lifestyle is calling all the survivors of COVID to share their stories of survival and hope.Write to us at toi.health1@gmail.com with 'My COVID story' in the subject line.We will publish your experience.The views expressed in this article should not be considered as a substitute for a physician's advice. Please consult your treating physician for more details"

cvnlp  = CovidDiariesNLP()
print(cvnlp.getNLPInfo(text=doc))

"""
Output:

{
    'keywords': ['hospital', 'days', 'covid experience', 'cousin', 'room', 'test', 'family', 'ward boys', 'chennai', 'long hours'], 
    'cities': ['Chennai'], 
    'abusive': 0.009639626166359588, 
    'emotions': ['Sad', 'Fear']
}

"""

from textfragmenter import TxtFragmenter 

tf = TxtFragmenter()

text = "Sana Malak and her family tested positive when the COVID fear had just begun to grapple India. While she was asymptomatic, others in her family were in a bad shape. Here’s their COVID journeyMy battle with coronavirus dates back to the time when the entire nation was in complete lockdown and when cases were gradually rising in India. When the only thing that everyone asked each other was how many cases? We all were clouded in uncertainty and fear. It was in mid May when cases were attaining a peak in India. That time a positive case was found on the backside of my house, and then next day in an area on the frontside of my house. In mere 2 days, we found ourselves in a containment zone.. Containment zoneSince it was a lockdown, only essentials were open. But after our area was declared a containment zone, even the essentials did not open many times. People were scared of going out of homes and so were we. We live in a joint family, with my grandmother, two uncles, aunts, their kids, me and my parents. My father, uncle and aunt got symptoms, high grade fever and extreme body pain/myalgia. So much that they could not even get up from the bed. We got them tested and all three of them were COVID positive with pneumonia. They were admitted in the hospital and we being close contacts were tested too. Tears rolled down my eyes seeing my grandma's condition (who is 85 years), when they were taking her swab. She did not understand anything and was merely pushing the nurse and crying.I was naturally worried for my family. When the results came, we realised 5 out of 11 of us were positive including me. I was completely asymptomatic by the grace of God but still had to be hospitalised as there was no home quarantine during that time. My grandmother was negative but she was extremely weak. How the days wentAs the main members of our family were hospitalised and remaining in quarantine, we could not go out to buy essentials. Thankfully our neighbours and friends helped and we got food delivered at our home. My grandmother was constantly put on ORS water.. I was looking at my family in the hospital and praying for their recovery.. There was anxiety, fear, numbing fear of losing a life. But I tried to stay calm, admiring the tireless efforts of our doctors and nurses. Their efforts were remarkable. They were wearing PPE kits in that extreme weather of mid May and taking care of all of us. After 15 days, we all got discharged from the hospital but the weakness persisted for 1 more month. Even in our home, we lived on separate floors. Parents were separated from kids, husband from wife, all silently praying for each other’s safety.. By the grace of Almighty, we all are fine now and fully recovered.. What helped us recoverThese are the things that ensured our proper recovery - Proper treatment, meditation, good and healthy food, warm water, gargles, turmeric milk, strong will power and support of family, combined with prayers and lots of prayers.. "

print(tf.cleanAndFragment(text))
